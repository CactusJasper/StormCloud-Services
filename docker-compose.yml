version: "3.3"
services:
    webserver:
        restart: always
        network_mode: "host"
        depends_on:
            - bot
        build:
            context: ./webServer
        environment:
            - NODE_ENV=production
    game_server:
        restart: always
        network_mode: "host"
        depends_on:
            - bot
            - webserver
        build:
            context: ./gameServer
        environment:
            - NODE_ENV=production
    bot:
        restart: always
        network_mode: "host"
        build:
            context: ./bot
        environment:
            - NODE_ENV=production
    nginx:
        restart: "no"
        restart: always
        restart: on-failure
        restart: unless-stopped
        tty: true
        network_mode: "host"
        depends_on: 
            - webserver
            - game_server
            - bot
        build:
            context: ./nginx